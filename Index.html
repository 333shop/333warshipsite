<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>333warship - Marketplace</title>
  <style>
    :root {
      --bg-black: #000000;
      --gray-dk: #1a1a1a;
      --gray-md: #2a2a2a;
      --gray-lt: #444444;
      --accent: #ff3333;
      --accent-hvr: #ff1a1a;
      --text: #e0e0e0;
    }
    body {
      margin: 0;
      background: var(--bg-black) url('https://cdn.discordapp.com/attachments/1472431047315685497/1474196428875108584/02855507-6CD6-4CC1-9E82-E3C9898575AB.jpg?ex=6998f7e9&is=6997a669&hm=af3e729535faf7bc88f7fa198aa2847823ab9832371d91e755aea7881d351cfb&') no-repeat center center fixed;
      background-size: cover;
      color: var(--text);
      min-height: 100vh;
      font-family: 'Segoe UI', Arial, sans-serif;
      padding: 2rem;
    }
    header {
      text-align: center;
      margin-bottom: 3rem;
    }
    h1 {
      font-size: 5rem;
      margin: 0;
      color: var(--accent);
      text-shadow: 0 0 30px var(--accent), 0 0 60px #000;
      letter-spacing: 4px;
      font-weight: 900;
    }
    .listings {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }
    .card {
      background: rgba(26,26,26,0.88);
      backdrop-filter: blur(12px);
      border: 1px solid #444;
      border-radius: 16px;
      padding: 1.8rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      transition: all 0.3s ease;
    }
    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 50px rgba(255,51,51,0.25);
      border-color: var(--accent);
    }
    .card h3 {
      margin: 0 0 1rem;
      color: var(--accent);
      font-size: 1.6rem;
    }
    .card p {
      margin: 0.6rem 0;
      color: #ccc;
    }
    .buy-btn {
      background: var(--accent);
      color: white;
      border: none;
      padding: 0.9rem 1.8rem;
      border-radius: 10px;
      font-size: 1.1rem;
      cursor: pointer;
      margin-top: 1rem;
      width: 100%;
      transition: all 0.3s;
    }
    .buy-btn:hover {
      background: var(--accent-hvr);
      transform: scale(1.03);
    }
    #add-btn {
      position: fixed;
      bottom: 40px;
      right: 40px;
      width: 90px;
      height: 90px;
      background: var(--accent);
      border: none;
      border-radius: 50%;
      font-size: 4.5rem;
      color: white;
      cursor: pointer;
      box-shadow: 0 10px 40px rgba(255,51,51,0.5);
      transition: all 0.3s;
      z-index: 1000;
    }
    #add-btn:hover {
      transform: scale(1.15) rotate(90deg);
      background: var(--accent-hvr);
    }
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.9);
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    .modal-content {
      background: var(--gray-dk);
      padding: 3rem;
      border-radius: 20px;
      width: 90%;
      max-width: 520px;
      border: 2px solid var(--accent);
      box-shadow: 0 0 60px rgba(255,51,51,0.4);
    }
    input, textarea {
      width: 100%;
      padding: 1rem;
      margin: 1rem 0;
      background: #222;
      border: 1px solid #555;
      border-radius: 10px;
      color: white;
      font-size: 1.1rem;
    }
    input:focus, textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 12px rgba(255,51,51,0.4);
    }
    button.primary {
      background: var(--accent);
      color: white;
      border: none;
      padding: 1.2rem;
      font-size: 1.2rem;
      border-radius: 10px;
      cursor: pointer;
      width: 100%;
      margin-top: 1rem;
    }
    button.primary:hover {
      background: var(--accent-hvr);
    }
    button.secondary {
      background: #444;
      margin-top: 0.8rem;
    }
    #file-info {
      color: #aaa;
      margin: 0.5rem 0;
      font-size: 0.95rem;
    }
  </style>
</head>
<body>

<header>
  <h1>333warship</h1>
</header>

<div class="listings" id="listings"></div>

<button id="add-btn">+</button>

<!-- Add Item Modal -->
<div class="modal" id="add-modal">
  <div class="modal-content">
    <h2 style="text-align:center; color:var(--accent);">Add Item For Sale</h2>
    <input id="item-name" placeholder="Name of thing you're selling" />
    <input id="item-price" type="text" placeholder="Price (e.g. $25 or 5000 Robux)" />
    <input id="item-file" type="file" accept="*/*" />
    <div id="file-info"></div>
    <button class="primary" onclick="addItem()">Add to Marketplace</button>
    <button class="primary secondary" onclick="closeModal('add-modal')">Cancel</button>
  </div>
</div>

<!-- Buy Modal -->
<div class="modal" id="buy-modal">
  <div class="modal-content">
    <h2 style="text-align:center; color:var(--accent);">Complete Purchase</h2>
    <p id="buy-title" style="text-align:center; margin-bottom:1.5rem;"></p>
    <p style="text-align:center; color:#ccc;">Pay with:</p>
    <select id="payment-type" style="width:100%; padding:1rem; margin:1rem 0; background:#222; color:white; border:1px solid #555; border-radius:10px;">
      <option value="apple">Apple Gift Card</option>
      <option value="robux">Robux Gift Card</option>
    </select>
    <textarea id="gift-code" placeholder="Paste your gift card code here..." rows="4"></textarea>
    <button class="primary" onclick="submitPayment()">Submit Payment</button>
    <button class="primary secondary" onclick="closeModal('buy-modal')">Cancel</button>
  </div>
</div>

<script>
  const listingsDiv = document.getElementById('listings');
  const addModal = document.getElementById('add-modal');
  const buyModal = document.getElementById('buy-modal');

  // Load saved listings from localStorage
  function loadListings() {
    const saved = localStorage.getItem('333warship_listings');
    if (saved) {
      const items = JSON.parse(saved);
      listingsDiv.innerHTML = '';
      items.forEach((item, index) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <h3>${item.name}</h3>
          <p><strong>Price:</strong> ${item.price}</p>
          <p><strong>File:</strong> ${item.fileName} (${(item.fileSize / 1024).toFixed(2)} KB)</p>
          <button class="buy-btn" onclick="openBuyModal(${index}, '${item.name}')">Buy Now</button>
        `;
        listingsDiv.appendChild(card);
      });
    }
  }

  // Add new item
  function addItem() {
    const name = document.getElementById('item-name').value.trim();
    const price = document.getElementById('item-price').value.trim();
    const fileInput = document.getElementById('item-file');
    const file = fileInput.files[0];

    if (!name || !price || !file) {
      alert('Fill all fields and select a file.');
      return;
    }

    const reader = new FileReader();
    reader.onload = (e) => {
      const listings = JSON.parse(localStorage.getItem('333warship_listings') || '[]');
      listings.push({
        name,
        price,
        fileName: file.name,
        fileSize: file.size,
        fileBase64: e.target.result // stored but not displayed
      });
      localStorage.setItem('333warship_listings', JSON.stringify(listings));
      closeModal('add-modal');
      loadListings();
      // Clear form
      document.getElementById('item-name').value = '';
      document.getElementById('item-price').value = '';
      fileInput.value = '';
      document.getElementById('file-info').textContent = '';
    };
    reader.readAsDataURL(file);
  }

  // Buy flow
  let currentBuyIndex = -1;
  function openBuyModal(index, name) {
    currentBuyIndex = index;
    document.getElementById('buy-title').textContent = `Buying: ${name}`;
    buyModal.style.display = 'flex';
  }

  function submitPayment() {
    const code = document.getElementById('gift-code').value.trim();
    if (!code) {
      alert('Paste a code.');
      return;
    }
    alert('Payment submitted! (This is a demo â€” no real processing occurred)\nThank you for your purchase.');
    closeModal('buy-modal');
    document.getElementById('gift-code').value = '';
  }

  function closeModal(id) {
    document.getElementById(id).style.display = 'none';
  }

  // Event listeners
  document.getElementById('add-btn').onclick = () => {
    addModal.style.display = 'flex';
  };

  document.getElementById('item-file').onchange = (e) => {
    const file = e.target.files[0];
    document.getElementById('file-info').textContent = file ? `Selected: ${file.name} (${(file.size / 1024).toFixed(2)} KB)` : '';
  };

  // Init
  loadListings();
</script>
</body>
</html>
